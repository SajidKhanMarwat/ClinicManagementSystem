@model List<ClinicManagementSystem.Models.UserModel>
@{
    Layout = null;
}

<!DOCTYPE html>
<html :class="{ 'theme-dark': dark }" x-data="data()" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>

    <link rel="stylesheet" href="~/Content/css/tailwind.output.css" />
    <link rel="stylesheet" href="~/Content/bootstrap.min.css" />
    <script src="~/Content/js/init-alpine.js"></script>
    <script src="~/Content/js/scripts.js"></script>
    <script src="~/Scripts/jquery-3.6.4.min.js"></script>

    <!--Used for bootstrap popups-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <link href="~/Content/css/styles.css" rel="stylesheet" />
    <link href="~/Content/js/scripts.js" rel="stylesheet" />

</head>
<body>
     Navigation
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="/Home/Index">CMS</a>
            <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse d-sm-inline-flex justify-content-between" id="navbarResponsive">
                <ul class="navbar-nav ms-auto navbar-nav flex-grow-1">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="~/Home/Index">Home</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="~/Home/about">About</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="~/Home/contact">Contact</a></li>

                </ul>

                @Html.Partial("_LoginPartial")

            </div>
        </div>
    </nav>

    <div class="flex h-screen bg-gray-50 dark:bg-gray-900"
         :class="{ 'overflow-hidden': isSideMenuOpen }">
        <!-- Desktop sidebar -->
        <aside class="z-20 hidden w-64 overflow-y-auto dark:bg-gray-800 md:block flex-shrink-0" style="background-color: #E7E9EB">
            <div style="padding-top: 90px;">

                <div class="py-3 px-0 px-lg-3" style="background-color: rgb(44 62 80); color: white; display: grid; grid-template-columns: auto 1fr; grid-gap: 15px; align-items: center;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                    </svg>
                    <b>@Session["FirstName"] &nbsp; @Session["LastName"]</b>
                </div>


                <ul class="mt-6" style="padding-left: 0px;">
                    <li class="relative px-6 py-3">
                        <span aria-hidden="true"></span>
                        <a class="inline-flex items-center w-full text-m font-semibold text-gray-800 transition-colors duration-150 hover:text-gray-800 dark:hover:text-gray-200 dark:text-gray-100"
                           href="~/Admin/Index">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 22 22"
                                 stroke="currentColor">
                                <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                            </svg>
                            <span class="ml-4">Dashboard</span>
                        </a>
                    </li>
                    <li class="relative px-6 py-3">
                        <span aria-hidden="true"></span>
                        <a class="inline-flex items-center w-full text-m font-semibold text-gray-800 transition-colors duration-150 hover:text-gray-800 dark:hover:text-gray-200 dark:text-gray-100"
                           href="~/Admin/AllDoctors">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 15 15"
                                 stroke="currentColor">
                                <path d="M14 11.3c-1-1.9-2-1.6-3.1-1.7 0.1 0.3 0.1 0.6 0.1 1 1.6 0.4 2 2.3 2 3.4v1h-2v-1h1c0 0 0-2.5-1.5-2.5s-1.5 2.4-1.5 2.5h1v1h-2v-1c0-1.1 0.4-3.1 2-3.4 0-0.6-0.1-1.1-0.2-1.3-0.2-0.1-0.4-0.3-0.4-0.6 0-0.6 0.8-0.4 1.4-1.5 0 0 0.9-2.3 0.6-4.3h-1c0-0.2 0.1-0.3 0.1-0.5s0-0.3-0.1-0.5h0.8c-0.3-1-1.3-1.9-3.2-1.9 0 0 0 0 0 0s0 0 0 0 0 0 0 0c-1.9 0-2.9 0.9-3.3 2h0.8c0 0.2-0.1 0.3-0.1 0.5s0 0.3 0.1 0.5h-1c-0.2 2 0.6 4.3 0.6 4.3 0.6 1 1.4 0.8 1.4 1.5 0 0.5-0.5 0.7-1.1 0.8-0.2 0.2-0.4 0.6-0.4 1.4 0 0.4 0 0.8 0 1.2 0.6 0.2 1 0.8 1 1.4 0 0.7-0.7 1.4-1.5 1.4s-1.5-0.7-1.5-1.5c0-0.7 0.4-1.2 1-1.4 0-0.3 0-0.7 0-1.2s0.1-0.9 0.2-1.3c-0.7 0.1-1.5 0.4-2.2 1.7-0.6 1.1-0.9 4.7-0.9 4.7h13.7c0.1 0-0.2-3.6-0.8-4.7zM6.5 2.5c0-0.8 0.7-1.5 1.5-1.5s1.5 0.7 1.5 1.5-0.7 1.5-1.5 1.5-1.5-0.7-1.5-1.5z"></path>
                            </svg>
                            <span class="ml-4">All Doctors</span>
                        </a>
                    </li>
                    <li class="relative px-6 py-3">
                        <span aria-hidden="true"></span>
                        <a class="inline-flex items-center w-full text-m font-semibold text-gray-800 transition-colors duration-150 hover:text-gray-800 dark:hover:text-gray-200 dark:text-gray-100"
                           href="~/Admin/AllPatients">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 28 28"
                                 stroke="currentColor">
                                <path d="M15.002,9l-2.003,0c-0.552,0 -1,0.448 -1,1c-0,0.552 0.448,1 1,1l1.996,0l-0.006,1.997c-0.002,0.552 0.445,1.001 0.997,1.003c0.552,0.002 1.001,-0.445 1.003,-0.997l0.006,-2.003l2.004,0c0.552,0 1,-0.448 1,-1c-0,-0.552 -0.448,-1 -1,-1l-1.997,0l0.006,-1.997c0.002,-0.552 -0.445,-1.001 -0.997,-1.003c-0.551,-0.002 -1.001,0.445 -1.003,0.997l-0.006,2.003Z"></path>
                                <path d="M5.992,23l0,2c0,0.552 0.448,1 1,1c0.552,0 1,-0.448 1,-1l0,-2l16,0l0,2c0,0.552 0.448,1 1,1c0.552,0 1,-0.448 1,-1l0,-2l1.008,-0c1.657,-0 3,-1.343 3,-3l0,-6c0,-0.552 -0.448,-1 -1,-1c-0.552,-0 -1,0.448 -1,1l0,3l-17,-0l0,-1.019c0,-0.795 -0.316,-1.558 -0.879,-2.121c-0.562,-0.562 -1.325,-0.879 -2.121,-0.879l-4,0l0,-1.481c-0,-0.552 -0.448,-1 -1,-1c-0.552,0 -1,0.448 -1,1l0,8.5c-0,0.796 0.316,1.559 0.879,2.121c0.562,0.563 1.325,0.879 2.121,0.879l0.992,0Zm22.008,-4l-24,-0l-0,1c-0,0.265 0.105,0.52 0.293,0.707c0.187,0.188 0.442,0.293 0.707,0.293c-0,0 22,-0 22,-0c0.552,-0 1,-0.448 1,-1l0,-1Zm-24,-4.019l-0,2.019l5,-0l0,-1.019c0,-0.265 -0.105,-0.519 -0.293,-0.707c-0.187,-0.187 -0.442,-0.293 -0.707,-0.293l-4,0Z"></path>
                            </svg>
                            <span class="ml-4">All Patients</span>
                        </a>
                    </li>
                    <li class="relative px-6 py-3">
                        <span aria-hidden="true"></span>
                        <a class="inline-flex items-center w-full text-m font-semibold text-gray-800 transition-colors duration-150 hover:text-gray-800 dark:hover:text-gray-200 dark:text-gray-100"
                           href="~/Admin/AllAppointments">
                            <svg class="w-5 h-5"
                                 aria-hidden="true"
                                 fill="none"
                                 stroke-linecap="round"
                                 stroke-linejoin="round"
                                 stroke-width="2"
                                 viewBox="0 0 35 35"
                                 stroke="currentColor">
                                <path d="M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM8 10.016h16v-2.016h-16v2.016zM10.016 18.016h12v-2.016h-12v2.016zM12 14.016h8v-2.016h-8v2.016zM14.016 22.016h4v-2.016h-4v2.016z"></path>
                            </svg>
                            <span class="ml-4">View All Appointments</span>
                        </a>
                    </li>
                </ul>

                <div class="px-6 my-6">
                    @Html.ActionLink("Add New Doctor", "AddDoctor", "Admin", null, new { @class = "flex items-center justify-between w-full px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple" })
                </div>

            </div>
        </aside>

        <div class="flex flex-col flex-1 w-full">
            <header>
                <div class="container flex items-center justify-between h-full px-6 mx-auto text-black-600 dark:text-purple-300">
                    <h5><strong>@*@ViewBag.User.FirstName @ViewBag.User.LastName*@</strong></h5>
                </div>
            </header>
            <main class="h-full overflow-y-auto">
                <div class="container px-6 mx-auto grid">
                    <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
                    </h2>
                    <br />
                    <br />
                    <!-- Cards -->
                    <div class="grid gap-6 mb-8 md:grid-cols-2 xl:grid-cols-4">
                        <!-- Card -->
                        <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
                            <div>
                                <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
                                    Active Patients
                                </p>
                                <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
                                    @ViewBag.TotalPatients
                                </p>
                            </div>
                        </div>
                        <!-- Card -->
                        <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
                            <div>
                                <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
                                    Active Doctors
                                </p>
                                <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
                                    @ViewBag.totalDoctors
                                </p>
                            </div>
                        </div>
                        <!-- Card -->
                        <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
                            <div>
                                <p class="mb-2 text-sm font-medium text-gray-600 dark:text-gray-400">
                                    All Appointments
                                </p>
                                <p class="text-lg font-semibold text-gray-700 dark:text-gray-200">
                                    @ViewBag.TotalAppointments
                                </p>
                            </div>
                        </div>

                    </div>

                    <!-- New Table -->
                    <h3 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">All active registered users</h3>
                    <form>
                        <div class="w-full overflow-hidden rounded-lg shadow-xs">
                            <div class="w-full overflow-x-auto">
                                <table class="w-full whitespace-no-wrap">
                                    <thead>
                                        <tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b dark:border-gray-700 bg-gray-50 dark:text-gray-400 dark:bg-gray-800">
                                            <th class="px-4 py-3">FullName</th>
                                            <th class="px-4 py-3">Email</th>
                                            <th class="px-4 py-3">Phone</th>
                                            <th class="px-4 py-3">Gender</th>
                                            <th class="px-4 py-3">DOB</th>
                                            <th class="px-4 py-3">Joining Date</th>
                                            <th class="px-4 py-3">User Profile</th>
                                        </tr>
                                    </thead>

                                    <!-- All Users List from Database -->

                                    <tbody class="bg-white divide-y dark:divide-gray-700 dark:bg-gray-800">
                                        @foreach (var item in Model)
                                        {
                                            <tr class="text-gray-700 dark:text-gray-400">
                                                <td class="px-4 py-3">
                                                    <div class="flex items-center text-sm">
                                                        <div>
                                                            <p class="font-semibold">@item.FirstName&nbsp;@item.LastName</p>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="px-4 py-3 text-sm">
                                                    @item.Email
                                                </td>
                                                <td class="px-4 py-3 text-sm">
                                                    @item.Phone
                                                </td>
                                                <td class="px-4 py-3 text-sm">
                                                    @item.Gender
                                                </td>
                                                <td class="px-4 py-3 text-sm">
                                                    @item.Age
                                                </td>
                                                <td class="px-4 py-3 text-sm">
                                                    @item.CreatedOn
                                                </td>

                                                <td class="px-4 py-3 text-sm">
                                                    <button formaction=@Url.Action("UserProfile"+"/"+item.UserID) formmethod="post"
                                                            type="submit" class="px-4 py-2 text-sm font-medium leading-5 text-white transition-colors
                                                            duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600
                                                            hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">
                                                        View Profile
                                                    </button>
                                                    @*@Html.Partial("~/Views/Shared/_userProfilePOPUP.cshtml")*@
                                                </td>

                                                <td class="px-4 py-3 text-sm">
                                                    @*<button id="btnUserID" formaction=@Url.Action("Index"+"/"+item.UserID) formmethod="post"
                type="submit"
                class="px-4 py-2 text-sm font-medium leading-5 text-white transition-colors
        duration-150 bg-purple-600 border border-transparent rounded-lg
        active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">
            Delete
        </button>*@
                                                    <button id="btnUserID" formaction=@Url.Action("DeleteDoctor"+"/"+item.UserID) formmethod="post"
                                                            type="submit"
                                                            class="px-4 py-2 text-sm font-medium leading-5 text-white transition-colors
                                                    duration-150 bg-purple-600 border border-transparent rounded-lg
                                                    active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">
                                                        Delete
                                                    </button>
                                                </td>

                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </form>
                </div>
            </main>
        </div>
    </div>
</body>
</html>